<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head lang="en">
<meta charset="UTF-8" />
<meta http-equiv="x-ua-compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!-- JQuery -->
<script type="text/javascript" th:src="@{/jquery/jquery-3.3.1.js}"></script>
<!-- Bootstrap -->
<script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.js}"></script>
<link th:href="@{/bootstrap/css/bootstrap.css}" rel="stylesheet" />
<link th:href="@{/bootstrap/css/bootstrap-theme.css}" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>

<!-- Myself Javascript & CSS -->
<link rel="stylesheet" th:href="@{/assets/manager.css}" />
<!--  
<script type="text/javascript" th:src="@{/assets/mamager.js}"></script>

<link href="http://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" th:href="@{/pop_up_windows/css/htmleaf-demo.css}">
<link rel="stylesheet" type="text/css" href="@{/pop_up_windows/css/jquery.alertable.css}">
-->

<title>管理员信息管理</title>

</head>

<body>

	<div class="row">

		<div id="left" class="col-lg-2 col-md-2 col-sm-2">
			<img th:src="@{/images/m_left.png}" />
		</div>
		<!-- left end -->

		<div id="middle" class="col-lg-8 col-md-8 col-sm-8">
			<div class="related container">

				<div class="row">

					<!-- Title -->
					<div class="col-lg-11">
						<h3>管理员信息管理</h3>
					</div>

					<div class="col-lg-1 center-block">
						<button class="btn btn-primary" data-toggle="modal" data-target="#add">新增</button>
					</div>

					<!-- 弹窗 -->
					<div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog">

							<div class="modal-content">

								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
									<h4 class="modal-title" id="myModalLabel">新增管理员</h4>
								</div>

								<form th:action="@{/AdminUserController/addAdminUser}" class="form-horizontal" method="post">

									<div class="modal-body">

										<div class="form-group">
											<div class="col-sm-1"></div>
											<label for="" class="col-sm-3">管理员名称</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="adminUserName" name="adminUserName" placeholder="登录用户名...">
											</div>
											<div class="col-sm-2">
												<span id="alertAdmin"></span>
											</div>
										</div>

										<div class="form-group">
											<div class="col-sm-1"></div>
											<label for="" class="col-sm-3">密码</label>
											<div class="col-sm-6">
												<input type="password" class="form-control" id="password" name="password" placeholder="密码...">
											</div>
										</div>

										<div class="form-group">
											<div class="col-sm-1"></div>
											<label for="" class="col-sm-3">姓名</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="name" name="name" placeholder="姓名...">
											</div>
										</div>

										<div class="form-group">
											<div class="col-sm-1"></div>
											<label for="" class="col-sm-3">昵称</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="nickName" name="nickName" placeholder="昵称...	">
											</div>
										</div>

										<div class="form-group">
											<div class="col-sm-1"></div>
											<label for="" class="col-sm-3">手机</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="mobilePhone" name="mobilePhone" placeholder="13900000000">
											</div>
										</div>

										<div class="form-group">
											<div class="col-sm-1"></div>
											<label for="" class="col-sm-3">座机</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="telephone" name="telephone" placeholder="010-00000000">
											</div>
										</div>

										<div class="form-group">
											<div class="col-sm-1"></div>
											<label for="" class="col-sm-3">邮箱</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="email" name="email" placeholder="xxx@cncl.net.cn">
											</div>
										</div>

									</div>
									<!-- modal-body end -->

									<div class="modal-footer">
										<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
										<input type="submit" class="btn btn-primary" value="提交">
									</div>

								</form>

							</div>
							<!-- /.modal-content -->

						</div>
						<!-- /.modal -->
					</div>
					<!-- 弹窗 end -->

					<div class="col-lg-12">
						<label for="" class="col-sm-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
					</div>

					<!-- 查询 -->
					<!--  
					<form th:action="@{/AdminUserController/selectAdminUser}" class="form-horizontal" method="post">
						<div class="form-group">
							<label for="adminUserName" class="col-sm-2 control-label">管理员名称</label>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="adminUserName" name="adminUserName" placeholder="名称...">
							</div>
							<div class="col-sm-2">
								<button type="submit" class="btn btn-default">查询</button>
								<button type="button" class="btn btn-default" onclick="queryAdmin()">查询</button>
							</div>
							<div class="col-sm-2">
								<button type="button" class="btn btn-default" onclick="addAdmin()">新增</button>
							</div>
						</div>
					</form>
					-->
					<!-- 查询 end -->

					<!-- 列表 -->
					<table id="table" class="table table-bordered table-responsive table-content table-condensed">
						<thead>
							<tr>
								<th id="" style="">ID</th>
								<th id="" style="">名称</th>
								<th id="" style="">姓名</th>
								<th id="" style="">昵称</th>
								<th id="" style="">手机</th>
								<th id="" style="">座机</th>
								<th id="" style="">邮箱</th>
								<th id="" style="">创建时间</th>
								<th id="" style="">上次登录时间</th>
								<th id="" style="">上次登录IP</th>
								<th id="" style="">操作</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="data:${list}">
								<td th:text="${data.adminUserId}"></td>
								<td th:text="${data.adminUserName}"></td>
								<td th:text="${data.name}"></td>
								<td th:text="${data.nickName}"></td>
								<td th:text="${data.mobilePhone}"></td>
								<td th:text="${data.telephone}"></td>
								<td th:text="${data.email}"></td>
								<td th:text="${#dates.format(data.createTime,'yyyy-MM-dd')}"></td>
								<td th:text="${#dates.format(data.lastLoginTime,'yyyy-MM-dd')}"></td>
								<td th:text="${data.lastLoginIp}"></td>
								<td>
									<!-- <a href="">详情</a> |  --> <a href="">修改</a> | <a id="remove" th:id="${data.adminUserId}" th:onclick="'doRemove(this)'">删除</a>
								</td>
							</tr>
						</tbody>

					</table>

					<!-- 分页 -->
					<nav aria-label="...">
						<ul class="pager">
							<li><a th:if="${not isFirstPage}" th:href="@{${'/AdminUserController/selectAdminUser'}(pageNum=${pageNum-1},pageSize=${pageSize})}">上一页</a> <a th:if="${isFirstPagee}" href="javascript:void(0);">上一页</a></li>

							<li th:each="pageNo: ${#numbers.sequence(1, totalPages)}"><a th:if="${pageNum eq pageNo}" href="javascript:void(0);"> <span th:text="${pageNum}"></span>
							</a> <a th:if="${not (pageNum eq pageNo)}" th:href="@{${'/AdminUserController/selectAdminUser'}(pageNum=${pageNo},size=${pageSize})}"> <span th:text="${pageNo}"></span>
							</a></li>

							<li><a th:if="${not isLastPage}" th:href="@{${'/AdminUserController/selectAdminUser'}(pageNum=${pageNum+1},size=${pageSize})}">下一页</a> <a th:if="${isLastPage}" href="javascript:void(0);">下一页</a></li>
						</ul>
					</nav>

				</div>
				<!-- related end -->
			</div>
			<!-- middle end -->

			<!--  
		<div id="right" class="col-lg-1 col-md-1 col-sm-1">
			<img th:src="@{/images/m_left.png}" />
		</div>
		-->
			<!-- right end -->
		</div>
		<!-- row end -->

		<script type="text/javascript">
			$(function() {
				$("#adminUserName").val("");
				$("#password").val("");
				// 验证
				checkName();
				//删除
				// deleteAdmin();
			});

			// 新增管理员 登录名验证
			function checkName() {
				$("#adminUserName").blur(function() {
					adminUserName = $("#adminUserName").val();
					$.ajax({
						type : "POST",
						url : "/AdminUserController/checkAdminUserName",
						data : {
							"adminUserName" : adminUserName
						},//data end
						dataType : "text",
						success : function(data) {
							if ("A0001" == data) {
								$("#alertAdmin").text("已存在");
								$("#adminUserName").val("");
								$("#password").val("");
							} else {
								$("#alertAdmin").text("");
							}
						}//success end
					});
				});
			}

			// 删除
			function doRemove(object) {
				var id = $(object).attr("id");
				if (confirm("是确认删除" + id + "用户？")) {
					$.post("/AdminUserController/deleteAdminUser", {
						"id" : id
					}, function(data) {
						if ("200" == data) {
							window.location.reload();
						} else {
							alert("删除失败！");
						}
					});
				}
			}
		</script>
</body>
</html>